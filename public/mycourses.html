<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Education</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="#" />
        <meta name="keywords" content="#" />
        <meta name="author" content="#" />
    
        
    
          <!-- Facebook and Twitter integration -->
        <meta property="og:title" content=""/>
        <meta property="og:image" content=""/>
        <meta property="og:url" content=""/>
        <meta property="og:site_name" content=""/>
        <meta property="og:description" content=""/>
        <meta name="twitter:title" content="" />
        <meta name="twitter:image" content="" />
        <meta name="twitter:url" content="" />
        <meta name="twitter:card" content="" />
    
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:300,400" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        
        <!-- Animate.css -->
        <link rel="stylesheet" href="css/animate.css">
        <!-- Icomoon Icon Fonts-->
        <link rel="stylesheet" href="css/icomoon.css">
        <!-- Bootstrap  -->
        <link rel="stylesheet" href="css/bootstrap.css">
    
        <!-- Magnific Popup -->
        <link rel="stylesheet" href="css/magnific-popup.css">
    
        <!-- Owl Carousel  -->
        <link rel="stylesheet" href="css/owl.carousel.min.css">
        <link rel="stylesheet" href="css/owl.theme.default.min.css">
    
        <!-- Flexslider  -->
        <link rel="stylesheet" href="css/flexslider.css">
    
        <!-- Pricing -->
        <link rel="stylesheet" href="css/pricing.css">
    
        <!-- Theme style  -->
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/allcourses.css">
    
        <!-- Modernizr JS -->
        <script src="js/modernizr-2.6.2.min.js"></script>
        <!-- FOR IE9 below -->
        <!--[if lt IE 9]>
        <script src="js/respond.min.js"></script>
        <![endif]-->
    
        </head>
<body>
    
   
	<nav class="fh5co-nav" role="navigation">
		
		<div class="top-menu">
			<div class="container">
				<div class="row">
					<div class="col-xs-3">
						<div id="fh5co-logo"><a href="index.html"><i class="icon-study"></i>Study Sphynx<span>.</span></a></div>
					</div>
					<div class="col-xs-10 text-right menu-1">
						<ul>
							<li class="active"><a href="allcourses.html"><b>All Courses</b></a></li>
							<!-- <li><a href="courses.html"><b>Recent Courses</b></a></li> -->
							<!-- <li><a href="teacher.html">Teacher</a></li> -->
							<li><a href="mycourses.html"><b>My courses</b></a></li>
                            <li><a href="mynotes.html"><b>My Notes</b></a></li>

						
							<li><a href="profile.html"><b>My profile</b></a></li>
                            <li><a href="create_a_course.html"><b>Create a course</b></a></li>
                            <li><a href="calender.html"><b>Calender</b></a></li>

							&nbsp;

							<li class="btn-cta LOGOUT"><a href="#"><span>Logout</span></a></li>
 
						</ul>
					</div>
				</div>
				
			</div>
		</div>
	</nav>
	
<br><br>
        
        
            <h3>MY COURSES </h3> 
            
            <div class="cards-recent">
            </div>
            
        
        
        <!-- <div class="popular-courses">
            <h3>Popular Courses</h3>
            <div class="cards-popular">

            </div>
        </div>

        <div class="my-courses">
            <h3>Enrolled Courses</h3>
            <div class="cards-my">

            </div>
        </div>
        
        <div class="created-courses">
            <h3>Created Courses</h3>
            <div class="cards-created">

            </div>
        </div> -->

        <script>
            async function connect(dest) {
                const res = await fetch(`/api/${dest}`, {
                    method: 'GET'
                });
                const data = await res.json();
                return data;
            }
            
            async function connection(dest) {
                let data = await connect(dest);
                console.log(data, "data");
                return data.user;
            }
            let idx = 0;
         
            window.addEventListener('load', async(e)=>{
                let cardsDiv = document.querySelector('.cards-recent');
                let data = await connection('course');

                
                for(let j=0; j<12; j++){   
                    let div = document.createElement('div');

                    div.classList.add('card');
                    div.innerHTML = `<div class="content bg-light">
                            <h2 class="title bg-light">${data[idx].name}</h2>
                            <p class="copy text-secondary">${data[idx++].description}</p><button id=${data[idx]._id} class="btn btn-click">View Course</button>
                        </div>`
                    cardsDiv.appendChild(div);
                }
                
                // let popular = document.querySelector('.cards-popular');
                // let my = document.querySelector('.cards-my');
                // let created = document.querySelector('.cards-created');

                // call(popular);
                // call(my);
                // call(created);
            })

            setTimeout(()=> {
                document.querySelector('.btn-click').addEventListener('click' ,async function (e) {
                    console.log('clickingngngn');
                    let id=this.getAttribute('id')
                    let data = await connect(`course/${id}`);
                    console.log(data);
                    localStorage.setItem('data', JSON.stringify({...data}));
                    window.location.href = '/viewcourse.html';
                })
            }, 3000)


        </script>
        <script src="js/logout.js"></script>


</body>
</html>