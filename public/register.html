<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="css/magnific-popup.css">

	<!-- Owl Carousel  -->
	<link rel="stylesheet" href="css/owl.carousel.min.css">
	<link rel="stylesheet" href="css/owl.theme.default.min.css">
	<link rel="stylesheet" href="css/login.css">
	<link rel="stylesheet" href="css/pricing.css">
	<link rel="stylesheet" href="css/style.css">	
<style>
	form{
		text-align: center;
	}
	button{
		padding: 10px 20px;
	}
</style>
</head>
<body>
	<nav class="fh5co-nav" role="navigation">
		
		<div class="top-menu">
			<div class="container">
				<div class="row">
					<div class="col-xs-3">
						<div id="fh5co-logo"><a href="index.html"><i class="icon-study"></i>Study Sphynx<span>.</span></a></div>
					</div>
					<div class="col-xs-10 text-right menu-1">
						<ul>

							<li class="active"><a href="index.html"><b>Home</b></a></li>
							<li><a href="courses.html"><b>Courses</b></a></li>
							<!-- <li><a href="teacher.html">Teacher</a></li> -->
							<li><a href="about.html"><b>About</b></a></li>
							<!-- <li><a href="pricing.html">Login</a></li> -->
						
							<li><a href="contact.html"><b>Contact</b></a></li>
							&nbsp;
							<li class="btn-cta"><a href="pricing.html"><span>Login</span></a></li>
							&nbsp;&nbsp;
							<li class="btn-cta"><a href="register.html"><span>Register</span></a></li>
						</ul>
					</div>
				</div>
				
			</div>
		</div>
	</nav>
	<div class="container" onclick="onclick">
		<div class="top"></div>
		<div class="bottom"></div>
		<div class="center">
			<form action="/register" method="post" class="REGISTER">
				<h2>Please Sign Up</h2>
				<h6>Please ensure the password is more than 6 characters</h6>
				<input type="text" placeholder="Name" name="" id="user" name="name"/>
				<input type="email" name="email" placeholder="email" id="email"/><input type="password" placeholder="password" id="pass" name="password"/>
				<h2>&nbsp;</h2>
				<button type="submit">Sign Up</button>
			</form>
		</div>
	</div>

	<script>
			async function connect(d1, dest) {
                const res = await fetch(`/api/${dest}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(d1)
                });

                const data = await res.json();
                return data;
            }

            function connection(data ,dest) {
                connect(data, dest).then(response => {
					if(response.redirect){
						window.location.href = response.redirect;
					}
					else{
						window.location.href = 'pricing.html';
					}
                    console.log(response.msg);
                }).catch(err => console.log(err));
            }

            document.querySelector('.REGISTER').addEventListener('submit', function(e){
                e.preventDefault();
                console.log('Registerring');
                let password = document.querySelector('#pass').value;
                let user = document.querySelector('#user').value;
                let email = document.querySelector('#email').value;
				console.log(password, email, user);
                connection({user, password, email}, 'register');
            })
	</script>
</body>
</html>